<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Trend VR</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./assets/vendor/owl-carousel/owl.carousel.min.css">
    <link rel="stylesheet" href="./assets/vendor/owl-carousel/owl.theme.default.min.css">
    <link rel="stylesheet" href="./assets/css/trendvr-styles.css">
    <style>
        video {
            max-width: 100%;
        }

        body {
            transition: background-color 0.5s ease;
        }

        /* 
        #preloader {
            display: flex;
            justify-content: center;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #ffffff;
            z-index: 9999;
        } */

        .logo-header {
            text-align: center;
            margin-top: 2rem;
            margin-bottom: 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .logo-header span {
            display: block;
            font-weight: 500;
            margin-bottom: 5px;
            font-size: .8rem;
        }

        .logo-header img {
            width: 120px
        }

        #preloader {
            width: 39px;
            height: 39px;
            display: flex;
            position: relative;
            align-content: space-around;
            justify-content: center;
        }

        .loader-svg {
            position: absolute;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
            fill: none;
            stroke-width: 5px;
            stroke-linecap: round;
            stroke: #252525;
        }

        .loader-svg.bg {
            stroke-width: 8px;
            stroke: #b6b1a5;
        }


        .ui-main_stage .ui-main_stage-video_container {
            /* z-index: 9999999; */
        }

        .ui-main_stage .ui-main_stage-video_container video {
            opacity: 1;
        }

        .animate {
            stroke-dasharray: 242.6;
            animation: fill-animation 1s cubic-bezier(1, 1, 1, 1) 0s infinite;
        }

        @keyframes fill-animation {
            0% {
                stroke-dasharray: 40 242.6;
                stroke-dashoffset: 0;
            }

            50% {
                stroke-dasharray: 141.3;
                stroke-dashoffset: 141.3;
            }

            100% {
                stroke-dasharray: 40 242.6;
                stroke-dashoffset: 282.6;
            }
        }
    </style>
    <script src="https://unpkg.com/feather-icons"></script>
</head>

<body>
    <div>
        <div style="position: relative;">
            <div class="ui-fit_guide" id="fit-guide">
                <a href="#" data-bs-toggle="tooltip"
                    data-bs-title="The greener the color around you is, the more relaxed your body will feel."><span
                        class="fit_guide-indicator">Loose</span></a>
                <div class="fit_guide-tube"></div>
                <a href="#" data-bs-toggle="tooltip"
                    data-bs-title="The red areas indicate that it will be too tight for you."><span
                        class="fit_guide-indicator">Tight</span></a>
            </div>


            <div class="ui-main_stage">
                <div class="ui-fit_modal" id="fit-modal">
                    <p>It appears that this size may not be the best fit for you. Maybe you can try another size</p>
                    <p>Also you can try another outfit</p>
                    <div class="ui-fit_modal-related">
                        <div><a href="#"><img src="./assets/img/related_modal_1.jpg" alt=""> </a> </div>
                        <div><a href="#"><img src="./assets/img/related_modal_2.jpg" alt=""> </a> </div>
                    </div>
                    <a href="#" id="ui-close_modal"><span>Close</span></a>
                </div>
                <a href="#" class="ui-main_stage-spin" onclick="takeForSpin(event)">
                    <i data-feather="refresh-ccw"></i> <span>Take it for a spin</span>
                </a>

                <div class="ui-main_stage-video_container">
                    <div class="ui-main_stage-video_container">
                        <div id="preloader" class="preloader">
                            <svg class="svg-container" height="100" width="100" viewBox="0 0 100 100">
                                <circle class="loader-svg bg" cx="50" cy="50" r="45"></circle>
                                <circle class="loader-svg animate" cx="50" cy="50" r="45"></circle>
                            </svg>
                        </div>
                        <video id="video" autoplay loop muted playsinline class="zoom-video"
                            src="./assets/videos/base_idle.webm"></video>
                    </div>
                </div>
            </div>

            <div class="ui-sidebar">
                <div class="ui-sidebar-size_widget">
                    <div class="logo-header">
                        <span>Powered by</span>
                        <img alt="Trend VR Logo"
                            src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyNS40LjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAzMjYuNiAzNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzI2LjYgMzU7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsOiMyNjI1MjU7fQ0KPC9zdHlsZT4NCjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iMCw1LjkgMTQuMyw1LjkgMTQuMywzMy44IDIxLjMsMzMuOCAyMS4zLDUuOSAzNS42LDUuOSAzNS42LDAgMCwwICIvPg0KPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIxNzAuNSwyNC42IDE0NS40LDAgMTM4LjQsMCAxMzguNCwzMy44IDE0NS40LDMzLjggMTQ1LjQsOS4zIDE3MC41LDMzLjggMTc3LjUsMzMuOCAxNzcuNSwwIDE3MC41LDAgDQoJIi8+DQo8cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjI2My41LDI3LjcgMjUyLDAgMjQ0LjMsMCAyNTkuMiwzMy44IDI2Ny45LDMzLjggMjgyLjYsMCAyNzUuMSwwICIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTcwLjEsMTUuOGgtNy4zaC04LjdWNmg4LjdoNy4zYzMuNSwwLDYsMS41LDYsNC42Qzc2LjEsMTMuOSw3My42LDE1LjgsNzAuMSwxNS44IE04MywxMC4yDQoJQzgzLDMuMSw3Ny45LDAsNzAuMSwwSDQ3LjJ2My40aC0wLjF2MjIuOWgwLjF2Ny40aDYuOXYtNy40di01aDEyLjhjNS41LDAsOC41LDEsOC41LDQuOWwwLDcuNmg2Ljl2LThjMC00LjgtMi41LTYuMi03LjgtNi43DQoJQzc5LjQsMTguMyw4MywxNS45LDgzLDEwLjIiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zMTMuNywxNS44aC01LjVoLTEwLjRWNmgxMC40aDUuNWMzLjUsMCw2LDEuNSw2LDQuNkMzMTkuNiwxMy45LDMxNy4yLDE1LjgsMzEzLjcsMTUuOCBNMzE4LjEsMTkuMQ0KCWM0LjgtMC44LDguNS0zLjEsOC41LTguOGMwLTcuMS01LjItMTAuMi0xMy0xMC4yaC0yMi45djAuOVY2djkuOHY3LjR2MTAuNWg2LjlWMjMuM3YtMmgxMi44YzUuNSwwLDguNSwxLDguNSw0LjlsMCw3LjZoNi45di04DQoJQzMyNS45LDIwLjksMzIzLjQsMTkuNSwzMTguMSwxOS4xIi8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjA3LjIsMjcuN0gxOTVWNmgxMi4yYzEwLDAsMTIuOSw1LDEyLjksMTAuOEMyMjAuMSwyMi41LDIxNy4yLDI3LjcsMjA3LjIsMjcuNyBNMjA3LjQsMEgxODh2MzMuOGgxOS4zDQoJYzE0LjUsMCwxOS44LTgsMTkuOC0xN0MyMjcuMSw3LjgsMjIyLjYsMCwyMDcuNCwwIi8+DQo8cmVjdCB4PSI5NC4zIiBjbGFzcz0ic3QwIiB3aWR0aD0iMzMiIGhlaWdodD0iNS44Ii8+DQo8cmVjdCB4PSI5NC4zIiB5PSIyOS4yIiBjbGFzcz0ic3QwIiB3aWR0aD0iMzMiIGhlaWdodD0iNS44Ii8+DQo8cmVjdCB4PSI5NC4zIiB5PSIxNC42IiBjbGFzcz0ic3QwIiB3aWR0aD0iMzMiIGhlaWdodD0iNS44Ii8+DQo8L3N2Zz4NCg==" />
                    </div>
                    <h5>Choose your size</h5>
                    <div class="widget-size_item_container">
                        <div class="widget-size_item">
                            <a href="#" data-size="x-small" class="size size-option" onclick="selectSize(this, event)">
                                <span>XS</span>
                            </a>
                        </div>
                        <div class="widget-size_item">
                            <a href="#" data-size="small" class="size size-option" onclick="selectSize(this, event)">
                                <span>S</span>
                            </a>
                        </div>
                        <div class="widget-size_item no_stock">
                            <a href="#" data-size="medium" data-bs-toggle="tooltip" data-bs-title="No stock"
                                class="size">
                                <span>M</span>
                            </a>
                        </div>
                        <div class="widget-size_item no_stock">
                            <a href="#" data-size="large" data-bs-toggle="tooltip" data-bs-title="No stock"
                                class="size">
                                <span>L</span>
                            </a>
                        </div>
                    </div>
                    <div class="widget-choose_color">
                        <h5>Choose color</h5>
                        <ul class="choose_color-list">
                            <li class="color-option" data-bs-toggle="tooltip" data-color="white"
                                data-bs-title="White smoke"><a href="#"
                                    onclick="selectColor(this, event)"><span></span></a>
                            </li>
                            <li class="color-option color_no_stock" data-color="green" data-bs-toggle="tooltip"
                                data-bs-title="Green grass, No stock"><a href="#"><span></span></a></li>
                            <li class="color-option" data-color="red"><a href="#" data-bs-toggle="tooltip"
                                    data-bs-title="Intense red" onclick="selectColor(this, event)"><span></span></a>
                            </li>
                            <li class="color-option" data-color="blue"><a href="#" data-bs-toggle="tooltip"
                                    data-bs-title="Blue sky" onclick="selectColor(this, event)"><span></span></a></li>
                            <li class="color_no_stock color-option" data-color="purple" data-bs-toggle="tooltip"
                                data-bs-title="Purple, No stock"><a href="#"><span></span></a></li>
                            <li class="color-option" data-color="yellow"><a href="#" data-bs-toggle="tooltip"
                                    data-bs-title="Yellow egg" onclick="selectColor(this, event)"><span></span></a></li>
                            <li class="color-option" data-color="pink"><a href="#" data-bs-toggle="tooltip"
                                    data-bs-title="Pink Salmon" onclick="selectColor(this, event)"><span></span></a>
                            </li>
                        </ul>
                    </div>
                    <div class="widget-choose_size"><a href="#" id="check-size-link" onclick="toggleView(event)">Check
                            fit</a></div>

                    <div class="widget-zoom">
                        <a href="#" id="zoom-in" onclick="zoom('in',event)">
                            <i data-feather="zoom-in"></i>
                        </a>
                        <a href="#" id="zoom-out" onclick="zoom('out',event)">
                            <i data-feather="zoom-out"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="container widget-related" style="display:none">
            <div class="row">
                <h1 style="margin-bottom:2rem;">Looking for something different?</h1>
                <div class="owl-carousel">
                    <div><img src="./assets/img/product-two_picture_1.webp"></div>
                    <div><img src="./assets/img/product-two_picture_2.webp"></div>
                    <div><img src="./assets/img/product-third_picture_1.webp"></div>
                    <div><img src="./assets/img/product-third_picture_2.webp"></div>
                    <div><img src="./assets/img/product-fourth_picture_1.webp"></div>
                    <div><img src="./assets/img/product-fourth_picture_2.webp"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"
        integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS"
        crossorigin="anonymous"></script>
    <script src="./assets/vendor/animejs/anime.min.js"></script>
    <script>
        const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
        const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));
        var video = document.getElementById('video');
        var preloader = document.getElementById('preloader');
        var link = document.getElementById("check-size-link");
        var zoomIn = document.getElementById("zoom-in");
        var zoomOut = document.getElementById("zoom-out");
        var isNormalView = true;

        feather.replace();
        anime({
            targets: '#video',
            translateY: -10,
            duration: 500,
            easing: 'spring(1, 80, 10, 0)',
        });
        anime({
            targets: '.ui-sidebar-size_widget',
            translateY: 50,
            duration: 500,
            easing: 'spring(1, 80, 10, 0)',
            complete: function () {
                anime({
                    targets: '.ui-main_stage-spin',
                    translateY: 0,
                    opacity: 1,
                    duration: 500,
                    translateY: function (el, i) {
                        return -10 + (-25 * i);
                    },
                    easing: 'spring(1, 50, 10, 0)'
                });
            }
        });

        video.addEventListener('canplaythrough', function () {
            video.play();
        });

        // SCALE
        function zoom(type, event) {
            event.preventDefault();

            var videoElement = document.getElementById('video');
            var translateY = 0;
            var scale = 1;

            if (type === 'in') {
                scale = 2; // Incremento de zoom in
                translateY = 190
            } else if (type === 'out') {
                scale = 1; // Decremento de zoom out
                translateY = 0
            }

            anime({
                targets: videoElement,
                translateY: translateY,
                scale: scale,
                duration: 500,
                easing: 'spring(1, 80, 10, 0)',
            });
        }

        // SCALE

        function toggleView(event) {
            event.preventDefault();
            preloader.style.visibility = 'visible'; // Ocultar el elemento 'preloader'

            anime({
                targets: "#video",
                opacity: 0,
                duration: 500,
                easing: 'linear',
                complete: function () {
                    if (isNormalView) {
                        link.textContent = "Normal View";
                        video.src = "./assets/videos/idle_strain_map.webm";
                        var tl = anime.timeline({
                            easing: 'easeInExpo',
                            duration: 500
                        });

                        // Add children
                        tl
                            .add({
                                targets: '.ui-fit_guide',
                                translateY: 50,
                                opacity: 1,
                            })
                            .add({
                                targets: '.ui-fit_modal',
                                translateY: -50,
                                opacity: 1,
                            })
                    } else {
                        link.textContent = "Check Fit";
                        video.src = "./assets/videos/tshirt-x-small-idle_white.webm";
                        anime({
                            targets: ".ui-fit_guide",
                            opacity: 0,
                            duration: 300,
                            easing: 'easeInOutSine',
                            complete: function () {
                                anime({
                                    targets: ".ui-fit_modal",
                                    opacity: 0,
                                    duration: 300,
                                    easing: 'easeInOutSine'

                                });
                            }
                        });
                    }
                    anime({
                        targets: "#video",
                        opacity: 1,
                        duration: 500,
                        easing: 'linear',
                        complete: function () {
                            isNormalView = !isNormalView;
                            setTimeout(function () {
                                preloader.style.visibility = 'hidden'; // Ocultar el elemento 'preloader'

                                video.load();
                                video.play();
                            }, 100); // Ajusta la demora según sea necesario
                        }
                    });
                }
            });
        }


        // SIZE
        var currentSize = ''; // Declarar la variable currentSize fuera de la función

        function selectSize(size, event) {
            event.preventDefault();
            preloader.style.visibility = 'visible'; // Ocultar el elemento 'preloader'

            const newSize = size.getAttribute('data-size');
            if (newSize === currentSize) {
                return; // No realizar cambios si se selecciona el mismo tamaño nuevamente
            }
            currentSize = newSize;

            const allSizes = document.querySelectorAll('.size'); // Obtener todos los elementos con la clase 'size'
            allSizes.forEach(function (size) {
                size.classList.remove('active-size'); // Eliminar la clase 'active-size' de todos los tamaños
            });

            size.classList.add('active-size'); // Añadir la clase 'active-size' al tamaño seleccionado

            anime({
                targets: "#video",
                opacity: 0,
                duration: 500,
                easing: 'linear',
                complete: function () {
                    var videoSource = '';

                    if (currentSize === 'x-small') {
                        videoSource = './assets/videos/tshirt-x-small-idle.webm';
                    } else if (currentSize === 'small') {
                        videoSource = './assets/videos/tshirt-small-idle.webm';
                    }

                    video.src = videoSource;
                    preloader.style.visibility = 'hidden'; // Ocultar el elemento 'preloader'
                    video.load();
                    video.play();

                    anime({
                        targets: "#video",
                        opacity: 1,
                        duration: 500,
                        easing: 'linear'
                    });
                }
            });
        }

        // SIZE


        function selectColor(color, event) {
            event.preventDefault();
            preloader.style.visibility = 'visible'; // Ocultar el elemento 'preloader'

            anime({
                targets: "#video",
                opacity: 0,
                duration: 500,
                easing: 'linear',
                complete: function () {
                    if (isNormalView) {
                        link.textContent = "Check Fit";
                        video.src = "./assets/videos/tshirt-x-small-idle_white.webm";
                    } else {
                        link.textContent = "Normal View";
                        video.src = "./assets/videos/idle_strain_map.webm";
                    }

                    const colorOptions = document.getElementsByClassName('color-option');
                    Array.from(colorOptions).forEach(option => {
                        option.classList.remove('active');
                    });
                    color.parentNode.classList.add('active');

                    var videoSource = '';

                    var selectedColor = color.parentNode.getAttribute('data-color');

                    switch (selectedColor) {
                        case 'red':
                            videoSource = './assets/videos/tshirt-x-small-idle_red.webm';
                            break;
                        case 'blue':
                            videoSource = './assets/videos/tshirt-x-small-idle_celeste.webm';
                            break;
                        case 'yellow':
                            videoSource = './assets/videos/tshirt-x-small-idle_yellow.webm';
                            break;
                        case 'pink':
                            videoSource = './assets/videos/tshirt-x-small-idle_pink.webm';
                            break;
                        case 'white':
                            videoSource = './assets/videos/tshirt-x-small-idle_white.webm';
                            break;
                        default:
                            // Manejar caso por defecto si no coincide ningún color
                            break;
                    }

                    video.onloadedmetadata = function () {
                        anime({
                            targets: "#video",
                            opacity: 1,
                            duration: 500,
                            easing: 'linear',
                            complete: function () {
                                preloader.style.visibility = 'hidden'; // Ocultar el elemento 'preloader'
                                video.play();
                            }
                        });
                    };

                    video.src = videoSource;
                    video.load();
                }
            });
        }


        function takeForSpin(event) {
            event.preventDefault();
            preloader.style.visibility = 'visible'; // Ocultar el elemento 'preloader'

            anime({
                targets: "#video",
                opacity: 0,
                duration: 100,
                easing: 'easeOutBounce',
                complete: function () {
                    video.src = "./assets/videos/" + "tshirt-x-small-fit_check.webm";
                    video.load();

                    anime({
                        targets: "#video",
                        opacity: 1,
                        duration: 500,
                        easing: 'easeInCirc',
                        complete: function () {
                            video.play();
                            preloader.style.visibility = 'hidden'; // Ocultar el elemento 'preloader'
                        }
                    });
                }
            });
        }
    </script>

</body>

</html>